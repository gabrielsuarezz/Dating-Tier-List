<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>South Florida Date Ranker</title>
<style>
  :root {
    --bg-color: #121212;
    --panel-bg: #1e1e1e;
    --card-bg: #252525;
    --accent: #ff4081; /* Hot pink for "Cutesy" */
    --accent-blue: #448aff; /* Blue for History */
    --accent-green: #00e676; /* Green for Healthy/Nature */
    --accent-yellow: #ffeb3b; /* Yellow for Fun/Silly */
    --text-main: #e0e0e0;
    --text-muted: #a0a0a0;
  }

  body {
    font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-main);
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  h1 {
    text-transform: uppercase;
    letter-spacing: 3px;
    margin-bottom: 5px;
    text-align: center;
    background: linear-gradient(to right, #ff4081, #448aff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  p.subtitle {
    text-align: center;
    color: var(--text-muted);
    margin-bottom: 30px;
    max-width: 600px;
    font-size: 0.9rem;
  }

  /* --- FILTERS --- */
  .filter-bar {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .filter-btn {
    background: var(--panel-bg);
    border: 1px solid #444;
    color: var(--text-main);
    padding: 8px 16px;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.85rem;
    font-weight: 600;
  }

  .filter-btn:hover, .filter-btn.active {
    background-color: var(--accent);
    color: white;
    border-color: var(--accent);
    transform: translateY(-2px);
  }

  /* --- TIER GRID --- */
  .tier-container {
    width: 100%;
    max-width: 1400px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-bottom: 40px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  }

  .tier-row {
    display: flex;
    min-height: 150px;
    background-color: #000;
    border-bottom: 1px solid #333;
  }

  .tier-label {
    width: 100px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2.5rem;
    font-weight: 900;
    color: #000;
    flex-shrink: 0;
    text-shadow: 1px 1px 0px rgba(255,255,255,0.2);
  }

  /* Rank Colors */
  .s-tier { background: #ff7f7f; }
  .a-tier { background: #ffbf7f; }
  .b-tier { background: #ffdf7f; }
  .c-tier { background: #ffff7f; }
  .d-tier { background: #bfff7f; }
  /* No F Tier based on your screenshot preference */

  .dropzone {
    flex-grow: 1;
    background-color: #1a1a1a;
    padding: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-content: flex-start;
    transition: background 0.2s;
  }

  .dropzone.drag-over {
    background-color: #333;
    border: 2px dashed #666;
  }

  /* --- POOL AREA --- */
  .pool-section {
    width: 100%;
    max-width: 1400px;
    background-color: var(--panel-bg);
    border-radius: 12px;
    padding: 20px;
    border: 2px dashed #444;
    position: relative;
  }

  .pool-title {
    text-align: center; 
    margin-top: 0; 
    color: #aaa; 
    font-size: 1rem; 
    text-transform: uppercase; 
    letter-spacing: 1px;
    margin-bottom: 15px;
  }

  .pool-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
    min-height: 200px;
  }

  /* --- CARD DESIGN --- */
  .card {
    width: 220px;
    background-color: var(--card-bg);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    cursor: grab;
    display: flex;
    flex-direction: column;
    position: relative;
    border: 1px solid #333;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .card:hover {
    border-color: #666;
    z-index: 10;
    transform: translateY(-2px);
    box-shadow: 0 8px 15px rgba(0,0,0,0.5);
  }

  .card:active {
    cursor: grabbing;
    transform: scale(0.98);
  }

  .card-img-container {
    height: 110px;
    width: 100%;
    background-color: #333;
    position: relative;
    overflow: hidden;
  }
  
  .card-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
  }

  .card:hover .card-img {
    transform: scale(1.1);
  }

  .drive-badge {
    position: absolute;
    bottom: 5px;
    right: 5px;
    background-color: rgba(0,0,0,0.8);
    color: #fff;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 4px;
    backdrop-filter: blur(2px);
  }

  .card-body {
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    flex-grow: 1;
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
  }

  .card-title {
    font-size: 0.95rem;
    font-weight: bold;
    margin: 0;
    line-height: 1.2;
    color: #fff;
  }

  .card-price {
    font-size: 0.8rem;
    color: var(--accent-green);
    font-weight: bold;
    white-space: nowrap;
  }

  .card-desc {
    font-size: 0.75rem;
    color: #bbb;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .card-tags {
    margin-top: auto;
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    padding-top: 5px;
  }

  .tag {
    font-size: 0.65rem;
    padding: 2px 6px;
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: bold;
    color: #000;
  }

  .tag-art { background-color: var(--accent); color: white; }
  .tag-hist { background-color: var(--accent-blue); color: white; }
  .tag-fun { background-color: var(--accent-yellow); color: black; }
  .tag-food { background-color: var(--accent-green); color: black; }

  /* Drive Time Color Coding */
  .drive-short { color: #4caf50; } /* < 30 mins */
  .drive-med { color: #ff9800; }   /* 30-60 mins */
  .drive-long { color: #f44336; }  /* 60+ mins */

  /* Loading State */
  #loading-msg {
    text-align: center;
    color: var(--accent);
    padding: 20px;
    display: none;
  }

</style>
</head>
<body>

  <h1>üå¥ South Florida Date Ranker</h1>
  <p class="subtitle">Drag & Drop to rank. Drive times estimated from <strong>North Perry Airport (HWO)</strong>.</p>

  <div class="filter-bar">
    <button class="filter-btn active" onclick="filterCards('all')">All Dates</button>
    <button class="filter-btn" onclick="filterCards('art')">üé® Art & Cute</button>
    <button class="filter-btn" onclick="filterCards('history')">üèõÔ∏è History</button>
    <button class="filter-btn" onclick="filterCards('fun')">üé¢ Fun & Silly</button>
    <button class="filter-btn" onclick="filterCards('food')">üåø Healthy Eats</button>
  </div>

  <div class="tier-container">
    <div class="tier-row"><div class="tier-label s-tier">S</div><div class="dropzone" id="s-tier"></div></div>
    <div class="tier-row"><div class="tier-label a-tier">A</div><div class="dropzone" id="a-tier"></div></div>
    <div class="tier-row"><div class="tier-label b-tier">B</div><div class="dropzone" id="b-tier"></div></div>
    <div class="tier-row"><div class="tier-label c-tier">C</div><div class="dropzone" id="c-tier"></div></div>
    <div class="tier-row"><div class="tier-label d-tier">D</div><div class="dropzone" id="d-tier"></div></div>
  </div>

  <div class="pool-section">
    <h3 class="pool-title">üëá Unranked Dates üëá</h3>
    <div id="loading-msg">Loading Dates...</div>
    <div class="dropzone pool-grid" id="pool"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DATE DATA (Images sourced from Unsplash) ---
        const dates = [
        {
            id: 'vizcaya',
            name: 'Vizcaya Museum',
            desc: 'Stunning Italian estate on the water. Romantic gardens, history, and incredible photo ops.',
            price: '$$',
            time: '45 min',
            tags: ['history', 'art'],
            img: 'https://images.unsplash.com/photo-1574362848149-11496d93a7c7?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'morikami',
            name: 'Morikami Gardens',
            desc: 'Peaceful Japanese gardens & museum. Very zen, quiet walking paths, and bonsai displays.',
            price: '$$',
            time: '50 min',
            tags: ['history', 'art'],
            img: 'https://images.unsplash.com/photo-1578909196400-59f8f8156a05?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'coralcastle',
            name: 'Coral Castle',
            desc: 'Mysterious stone structures built by one man for his lost love. Quirky and historical.',
            price: '$$',
            time: '55 min',
            tags: ['history', 'fun'],
            img: 'https://images.unsplash.com/photo-1599661046289-e31897846e41?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'butterfly',
            name: 'Butterfly World',
            desc: 'Walk through tropical greenhouses with thousands of butterflies flying around you.',
            price: '$$',
            time: '35 min',
            tags: ['art', 'fun'],
            img: 'https://images.unsplash.com/photo-1534278931827-8a259344abe7?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'silverball',
            name: 'Silverball Arcade',
            desc: 'Retro museum where you can play! Dozens of vintage pinball machines on free play.',
            price: '$',
            time: '50 min',
            tags: ['fun', 'history'],
            img: 'https://images.unsplash.com/photo-1511882150382-421056ac8d89?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'ygm',
            name: 'Yellow Green Market',
            desc: 'Massive covered market (Sat/Sun). Walk around eating healthy treats. High energy.',
            price: '$',
            time: '15 min',
            tags: ['food', 'fun'],
            img: 'https://images.unsplash.com/photo-1488459716781-31db52582fe9?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'redlander',
            name: 'The Redlander',
            desc: 'Farm-to-table dining inside a winery. Famous for Avocado Stuffed Burgers (Steak or Veg).',
            price: '$$$',
            time: '60 min',
            tags: ['food', 'fun'],
            img: 'https://images.unsplash.com/photo-1466978913421-dad938661248?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'superblue',
            name: 'Superblue Miami',
            desc: 'Immersive art. Clouds, mirrors, and digital water. Super cool and interactive.',
            price: '$$$',
            time: '30 min',
            tags: ['art', 'fun'],
            img: 'https://images.unsplash.com/photo-1500462918059-b1a0cb512f1d?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'typark',
            name: 'T.Y. Park',
            desc: 'Rent paddle boats, walk the 2-mile loop, or picnic. Cheap, active, and local.',
            price: '$',
            time: '12 min',
            tags: ['fun', 'food'],
            img: 'https://images.unsplash.com/photo-1496568816309-51d7c20e3b21?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'catcafe',
            name: 'Good Luck Cat Cafe',
            desc: 'Grab a coffee and play with adoptable kittens in a thrift store. Very wholesome.',
            price: '$',
            time: '30 min',
            tags: ['art', 'fun'],
            img: 'https://images.unsplash.com/photo-1533743983669-94fa5c4338ec?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'bonnet',
            name: 'Bonnet House',
            desc: '1920s artist estate with wild monkeys in the trees. Old Florida vibes.',
            price: '$$',
            time: '35 min',
            tags: ['history', 'art'],
            img: 'https://images.unsplash.com/photo-1592345279419-959d784e8aad?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'madarts',
            name: 'Mad Arts',
            desc: 'Digital art museum in Dania. Interactive lights and projection mapping. Like Superblue but closer.',
            price: '$$',
            time: '20 min',
            tags: ['art', 'fun'],
            img: 'https://images.unsplash.com/photo-1550684848-fac1c5b4e853?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'frost',
            name: 'Frost Science',
            desc: 'Planetarium and Aquarium. Go for "Laser Fridays" for a music laser show.',
            price: '$$$',
            time: '35 min',
            tags: ['fun', 'history'],
            img: 'https://images.unsplash.com/photo-1534067783865-6101211a0bad?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'robert',
            name: 'Robert Is Here',
            desc: 'Legendary fruit stand with a petting zoo. Amazing smoothies and rare fruits.',
            price: '$',
            time: '60 min',
            tags: ['food', 'fun'],
            img: 'https://images.unsplash.com/photo-1610832958506-aa56368176cf?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'knaus',
            name: 'Knaus Berry Farm',
            desc: '(Seasonal Nov-Apr) Famous cinnamon rolls. Long lines but worth it.',
            price: '$',
            time: '55 min',
            tags: ['food', 'fun'],
            img: 'https://images.unsplash.com/photo-1519633858712-429ae553634e?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'venetian',
            name: 'Venetian Pool',
            desc: 'Historic 1920s swimming pool made from a coral rock quarry. Beautiful waterfalls.',
            price: '$$',
            time: '40 min',
            tags: ['history', 'fun'],
            img: 'https://images.unsplash.com/photo-1516239482977-c55067245ac0?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'lioncountry',
            name: 'Lion Country Safari',
            desc: 'Drive-through safari. Giraffes and rhinos walk right by your car. Super fun day trip.',
            price: '$$$',
            time: '65 min',
            tags: ['fun'],
            img: 'https://images.unsplash.com/photo-1534161308652-f87173e8770b?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'puttshack',
            name: 'Puttshack / PopStroke',
            desc: 'High-tech mini golf. Not your average windmill course. Good food and drinks too.',
            price: '$$',
            time: '30-60 min',
            tags: ['fun'],
            img: 'https://images.unsplash.com/photo-1592919505780-30395071d480?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'oleta',
            name: 'Oleta River Park',
            desc: 'Rent kayaks and paddle through mangrove tunnels. Active and beautiful nature.',
            price: '$',
            time: '25 min',
            tags: ['fun', 'food'],
            img: 'https://images.unsplash.com/photo-1544551763-46a8723ba3f9?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'tearoom',
            name: 'Cauley Sq Tea Room',
            desc: 'Hidden historic village. Finger sandwiches and tea in a cute cottage. Very romantic.',
            price: '$$',
            time: '55 min',
            tags: ['history', 'food'],
            img: 'https://images.unsplash.com/photo-1555567946-b07c817c1c8f?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'soundscape',
            name: 'SoundScape Park',
            desc: 'Watch movies projected on a massive wall while sitting on the grass. Usually free!',
            price: '$',
            time: '40 min',
            tags: ['art', 'fun'],
            img: 'https://images.unsplash.com/photo-1513106580091-1d82408b8cd8?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'betterthansex',
            name: 'Better Than Sex',
            desc: 'Restaurant that serves ONLY dessert. Speakeasy vibes, dark, and romantic.',
            price: '$$',
            time: '40 min',
            tags: ['food', 'art'],
            img: 'https://images.unsplash.com/photo-1621303837174-89787a7d4729?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'wynwood',
            name: 'Wynwood Walls',
            desc: 'Walk around the street art capital. Great for photos. Visit Paradox Museum nearby.',
            price: '$',
            time: '25 min',
            tags: ['art', 'fun'],
            img: 'https://images.unsplash.com/photo-1582559934353-2e47148e7276?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'gumbolimbo',
            name: 'Gumbo Limbo Center',
            desc: 'See sea turtles being rehabilitated. Nice boardwalk trails. Cute and educational.',
            price: '$',
            time: '45 min',
            tags: ['fun', 'history'],
            img: 'https://images.unsplash.com/photo-1437622368342-7a3d73a34c8f?auto=format&fit=crop&w=400&q=80'
        },
        {
            id: 'nakedfarmer',
            name: 'Naked Farmer',
            desc: 'Casual spot for locally sourced roasted veggies and meats. Healthy and delicious.',
            price: '$',
            time: '30 min',
            tags: ['food'],
            img: 'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?auto=format&fit=crop&w=400&q=80'
        }
        ];

        // --- RENDER LOGIC ---
        const pool = document.getElementById('pool');

        function createCard(data) {
        const card = document.createElement('div');
        card.className = 'card';
        card.draggable = true;
        card.id = data.id;
        
        // Determine drive time color
        let driveClass = 'drive-short';
        const mins = parseInt(data.time);
        if(mins > 30) driveClass = 'drive-med';
        if(mins > 55) driveClass = 'drive-long';

        // Build Tags
        const tagsHtml = data.tags.map(t => {
            let cls = '';
            if(t === 'art') cls = 'tag-art';
            if(t === 'history') cls = 'tag-hist';
            if(t === 'fun') cls = 'tag-fun';
            if(t === 'food') cls = 'tag-food';
            return `<span class="tag ${cls}">${t}</span>`;
        }).join('');

        card.innerHTML = `
            <div class="card-img-container">
            <img src="${data.img}" class="card-img" alt="${data.name}" loading="lazy">
            <div class="drive-badge">üöó <span class="${driveClass}">${data.time}</span></div>
            </div>
            <div class="card-body">
            <div class="card-header">
                <h4 class="card-title">${data.name}</h4>
                <span class="card-price">${data.price}</span>
            </div>
            <div class="card-desc">${data.desc}</div>
            <div class="card-tags">${tagsHtml}</div>
            </div>
        `;

        // Drag Events
        card.addEventListener('dragstart', () => { card.classList.add('dragging'); });
        card.addEventListener('dragend', () => { card.classList.remove('dragging'); });

        return card;
        }

        // Initial Render
        function renderCards(filterType) {
        const allCards = document.querySelectorAll('.card');
        allCards.forEach(card => {
            const data = dates.find(d => d.id === card.id);
            if(filterType === 'all' || data.tags.includes(filterType)) {
            card.style.display = 'flex';
            } else {
            card.style.display = 'none';
            }
        });
        }

        // Populate Cards
        try {
            dates.forEach(d => {
                pool.appendChild(createCard(d));
            });
        } catch(e) {
            console.error("Error creating cards:", e);
            document.getElementById('pool').innerHTML = "<p style='color:red; width:100%; text-align:center'>Error loading dates. Check console.</p>";
        }

        // Filter Logic Global Access
        window.filterCards = function(type) {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
        renderCards(type);
        }

        // Dropzone Logic
        const dropzones = document.querySelectorAll('.dropzone');
        dropzones.forEach(zone => {
        zone.addEventListener('dragover', e => {
            e.preventDefault();
            const afterElement = getDragAfterElement(zone, e.clientY);
            const draggable = document.querySelector('.dragging');
            if (afterElement == null) {
            zone.appendChild(draggable);
            } else {
            zone.insertBefore(draggable, afterElement);
            }
        });
        
        zone.addEventListener('dragenter', e => {
            e.preventDefault();
            zone.classList.add('drag-over');
        });

        zone.addEventListener('dragleave', () => {
            zone.classList.remove('drag-over');
        });
        
        zone.addEventListener('drop', () => {
            zone.classList.remove('drag-over');
        });
        });

        function getDragAfterElement(container, y) {
        const draggableElements = [...container.querySelectorAll('.card:not(.dragging)')];
        return draggableElements.reduce((closest, child) => {
            const box = child.getBoundingClientRect();
            const offset = y - box.top - box.height / 2;
            if (offset < 0 && offset > closest.offset) {
            return { offset: offset, element: child };
            } else {
            return closest;
            }
        }, { offset: Number.NEGATIVE_INFINITY }).element;
        }
    });
  </script>
</body>
</html>
